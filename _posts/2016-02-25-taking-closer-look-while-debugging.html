---
layout: post
title: Taking a closer look while debugging
date: '2016-02-25T23:14:00.001+11:00'
author: Zarah Dominguez
tags:
- debugging
- android
modified_time: '2016-02-25T23:24:33.441+11:00'
thumbnail: https://1.bp.blogspot.com/--65XPGXMBGk/Vs7XeAV0jJI/AAAAAAAAJlk/Jz8oceP0rVQ/s72-c/Screen%2BShot%2B2016-02-25%2Bat%2B21.15.37.png
blogger_id: tag:blogger.com,1999:blog-8588450866181483028.post-1584544435526310861
blogger_orig_url: http://www.zdominguez.com/2016/02/taking-closer-look-while-debugging.html
---

One of the most common sources of bugs (at least of <b><i>my</i></b> bugs) is math. I have been working on dynamically resizing a View the past days, and it was driving me nuts! I needed to consider preserving aspect ratio, device density, original view size, etc etc. Math is hard guys!<br /><br />Thankfully, Android Studio has a bunch of tools that can help us make debugging stuff like this a little less painful.<br /><br /><h2>The debug tool window is your friend</h2><div style="text-align: center;"><a href="http://1.bp.blogspot.com/--65XPGXMBGk/Vs7XeAV0jJI/AAAAAAAAJlk/Jz8oceP0rVQ/s1600/Screen%2BShot%2B2016-02-25%2Bat%2B21.15.37.png" imageanchor="1"><img border="0" height="118" src="https://1.bp.blogspot.com/--65XPGXMBGk/Vs7XeAV0jJI/AAAAAAAAJlk/Jz8oceP0rVQ/s400/Screen%2BShot%2B2016-02-25%2Bat%2B21.15.37.png" width="400" /></a></div><br />The debug tool widnow shows you a TON of helpful information when stopped at a particular breakpoint. On the left, you can see all the calls that were done until you arrive at a particular breakpoint. Clicking on one of those will open the corresponding file and show you the exact line. A gif paints a thousand words so here you go:<br /><br /><span id="goog_1617487950"></span> <br /><div class="separator" style="clear: both; text-align: center;"><a href="https://4.bp.blogspot.com/-PN4wl9RD9IE/Vs7Zyzl6wfI/AAAAAAAAJlw/1HAJnr-Rv6Q/s1600/click_and_go.gif" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="240" src="https://4.bp.blogspot.com/-PN4wl9RD9IE/Vs7Zyzl6wfI/AAAAAAAAJlw/1HAJnr-Rv6Q/s400/click_and_go.gif" width="400" /></a></div><br />The second pane shows you all variables in the currently selected file. This means that if you step through the method calls as described above, the displayed variables will change depending on that file. If you want to further inspect properties of a variable, you can expand that and do a deeper dive (<span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">this</span> for instance, will show all inherited fields as well).<br /><br /><h2>More inspection options</h2>One thing I love about Android Studio is that it shows you <b>inline</b> some pretty useful information about a variable.<br /><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-233Utuh9ae0/Vs7drdeT8pI/AAAAAAAAJmI/U8TRqB_AP0c/s1600/Screen%2BShot%2B2016-02-25%2Bat%2B21.54.38.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="37" src="https://1.bp.blogspot.com/-233Utuh9ae0/Vs7drdeT8pI/AAAAAAAAJmI/U8TRqB_AP0c/s400/Screen%2BShot%2B2016-02-25%2Bat%2B21.54.38.png" width="400" /></a></div><br />Here I can see that <span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">view</span> is a <span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">LinearLayout</span>, among other things. If you want to further inspect the properties of this <span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">view</span>, you can either (1) go through the variable pane as described above, or (2) look at the params directly from that line of code.<br /><br />I find Option 2 more appealing since I have more context on what I was trying to do with this variable, and if I did anything to it before or after a specific line of code. Here's option 2 in action:<br /><div class="separator" style="clear: both; text-align: center;"><a href="https://2.bp.blogspot.com/-ZnL-Td8e1s8/Vs7bZboHI7I/AAAAAAAAJl8/CFFsVNoNtKM/s1600/inspecting_params.gif" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="110" src="https://2.bp.blogspot.com/-ZnL-Td8e1s8/Vs7bZboHI7I/AAAAAAAAJl8/CFFsVNoNtKM/s400/inspecting_params.gif" width="400" /></a></div>Hover over the variable of interest then click on the&nbsp;+ all the way to the left (Or <span style="color: #333333; font-family: &quot;myriad set pro&quot; , &quot;helvetica neue&quot; , &quot;helvetica&quot; , &quot;arial&quot; , &quot;verdana&quot; , sans-serif;">⌘</span>+F1)&nbsp;then inspect to your heart's content.<br /><h2>Doing things with what we inspected</h2>Now that we know what properties the variable we are interested in has, it's time to actually look at what we are doing with those properties. Say you are trying to arrive at a value that will depend on the height of this view. You do some basic math:<br /><pre class="brush:java" style="text-align: center;">view.getHeight() / 2<br /></pre><br />You can ask Android Studio to tell you what that resolves into by asking it to evaluate the expression. Highlight interesting expression, right click, choose Evaluate Expression (alternative: highlight expression then <span style="color: #333333; font-family: &quot;myriad set pro&quot; , &quot;helvetica neue&quot; , &quot;helvetica&quot; , &quot;arial&quot; , &quot;verdana&quot; , sans-serif;">⌥</span>+F8). Studio will then show you a pop up with the selected expression; you can&nbsp;edit the expression here as you wish. Once ready, click Evaluate and you can now see what the result would have been if this expression was actually ran.<br /><div class="separator" style="clear: both; text-align: center;"><a href="https://4.bp.blogspot.com/-mkNl0RfQcQM/Vs7kS6QsKGI/AAAAAAAAJmo/S4hu4r172HM/s1600/evaluate_expression.gif" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="292" src="https://4.bp.blogspot.com/-mkNl0RfQcQM/Vs7kS6QsKGI/AAAAAAAAJmo/S4hu4r172HM/s400/evaluate_expression.gif" width="400" /></a></div><br /><br />Most of the time, however, we are not interested in computing values on the fly. We <b>know</b> what variable we are interested in, we&nbsp;<b>know</b>&nbsp;if there's any property of that variable we wanted to look at, and we <b>know</b> that we are doing some (possibly weird) math. This is when Watches become extremely useful. If you paid close attention to the Evaluate Expression gif, you would have noticed that there's a tiny footnote below the expression text: <i>Use Control+Shift+Enter to add to Watches</i>.<br /><br /><h2>Watches</h2>Watches is that unassuming pane all the way to the right of the debug tool window in the very first screenshot. Here you can add any number of variables and expressions and the Watches pane will resolve them all for you <u>in the context of the current frame</u> (Patience grasshopper, you will soon know what this means).<br /><br />One way to add watches is to evaluate an expression and use the shortcut as hinted above. Another way is to highlight the expression then choose Add to Watches from the context menu. Once added you can see the expression and the evaluated value immediately in the Watches pane.<br /><div class="separator" style="clear: both; text-align: center;"><a href="https://1.bp.blogspot.com/-eo7T5Y2B__4/Vs7hNO-zPVI/AAAAAAAAJmc/WjFeAzsO3Go/s1600/add_to_watches.gif" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="218" src="https://1.bp.blogspot.com/-eo7T5Y2B__4/Vs7hNO-zPVI/AAAAAAAAJmc/WjFeAzsO3Go/s400/add_to_watches.gif" width="400" /></a></div><br />You can also manually add a Watched value by clicking on the + in the Watches pane itself. The cool thing about doing it manually? Autocomplete!!<br /><div class="separator" style="clear: both; text-align: center;"><a href="https://2.bp.blogspot.com/-YJa6Oub7Vz4/Vs7pPZYQUQI/AAAAAAAAJm4/Se5ZW24PAko/s1600/add_watch_manual.gif" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="221" src="https://2.bp.blogspot.com/-YJa6Oub7Vz4/Vs7pPZYQUQI/AAAAAAAAJm4/Se5ZW24PAko/s320/add_watch_manual.gif" width="320" /></a></div><br />The amazing thing and most useful thing about Watches is that the values are updated as you step through the code AND are retained across debugging sessions.<br /><div class="separator" style="clear: both; text-align: center;"><a href="https://1.bp.blogspot.com/-DdndVKoMx0o/Vs7rVQmo6QI/AAAAAAAAJnE/gYHw2pYivH8/s1600/watch_updates.gif" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="124" src="https://1.bp.blogspot.com/-DdndVKoMx0o/Vs7rVQmo6QI/AAAAAAAAJnE/gYHw2pYivH8/s320/watch_updates.gif" width="320" /></a></div>Once I step through the code (F8), the expressions in Watches are updated within the current frame's context. Notice how initially&nbsp;<span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">changeBounds</span>&nbsp;is undefined?&nbsp;Step over until we hit the assignment and the value we are watching is updated.<br /><br /><h2>TL;DR?</h2>My favourite reasons for loving Watches:<br /><br /><ul><li>I do not have to <span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">Timber</span> or <span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">Toast</span> or <span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">Log</span> all the expressions I am interested in</li><li>Evaluated expressions, but lots of them</li><li>No need to re-add when looking at particularly nasty bugs</li><li>Quick and easy way to view results by changing expressions on the fly</li></ul><br />There are a LOT more ways of maximising your mileage with Watches, so head on over to the <a href="https://www.jetbrains.com/idea/help/debug-tool-window-watches.html" target="_blank">IntelliJ blog</a> to read all about them!<br /><br />PS: Clicking on the images/gifs to embiggen should work (I hope)!