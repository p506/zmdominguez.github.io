---
layout: post
title: Making ActionBarSherlock and ViewPagerIndicator play nice
date: '2012-08-14T16:50:00.000+10:00'
author: Zarah Dominguez
tags:
- viewpagerindicator
- actionbarsherlock
- android
modified_time: '2012-12-28T02:27:44.331+11:00'
blogger_id: tag:blogger.com,1999:blog-8588450866181483028.post-1805460110318014182
blogger_orig_url: http://www.zdominguez.com/2012/08/making-actionbarsherlock-and.html
---

<b style="color: red;">EDIT (20121227): </b>I made a <a href="http://droidista.blogspot.com/2012/12/styling-tab-selectors-for.html" target="_blank">new post</a> on changing the tab selector underline.<br /><span style="color: red;"><b>EDIT (20121014)</b>:</span> I received feedback from the comments that rotating the device will cause the tab contents to revert to the default text. In essence, the adapter "loses" the contents of the tabs. I have corrected this in the example below as well as in github.<br /><b><span style="color: red;">EDIT (20120905):</span></b> The full sample source code is now in&nbsp;<a href="https://github.com/zmdominguez/vpi-abs-demo" target="_blank">github</a>.<br /><br />So <a href="http://viewpagerindicator.com/" target="_blank">ViewPagerIndicator</a> cheerfully claims that it works with <a href="http://actionbarsherlock.com/" target="_blank">ActionBarSherlock</a>. I was trying to test this out today and I can't find a noob-friendly, step-by-step tutorial on how I can do it.&nbsp;I spent almost half a day frantically opening tab after tab in Google Chrome, but nothing seems to straight out say what I should do. So here it is, collated from several StackOverflow answers, blog posts, etc.<br /><br />Get the ViewPagerIndicator (hereafter referred to as VPI) and ActionBarSherlock (hereafter referred to as ABS) libraries.&nbsp;Create your Android application in Eclipse and add those two projects as dependency library projects. If you do not know how to do that, see <a href="http://developer.android.com/tools/projects/projects-eclipse.html#ReferencingLibraryProject" target="_blank">here</a>.<br /><br />First, create a theme. This is required by ABS, and will also help in VPI. What I did was to make the VPI theme inherit from the ABS theme so I don't lose any of the styles I use in other parts of the app. I just add or override items needed by the ViewPagerIndicator. In this example, I just changed the text size and color of the tab labels. You can go one step further and change the selected tab indicator (via state selectors), change how the selectors are drawn, etc.<br /><pre class="brush:xml">&lt;resources xmlns:android="http://schemas.android.com/apk/res/android"&gt;<br />&lt;!-- This is our main ActionBarSherlock theme --&gt;<br />    &lt;style name="Theme.Styled" parent="Theme.Sherlock.Light.DarkActionBar"&gt;<br />        &lt;item name="actionBarStyle"&gt;@style/Widget.Styled.ActionBar&lt;/item&gt;<br />        &lt;item name="android:actionBarStyle"&gt;@style/Widget.Styled.ActionBar&lt;/item&gt;<br />    &lt;/style&gt;&lt;!-- This is our ViewPagerIndicator theme. We inherit from the ABS theme --&gt;<br />    &lt;style name="Theme.VPI" parent="Theme.Styled"&gt;<br />       &lt;item name="vpiTabPageIndicatorStyle"&gt;@style/CustomTabPageIndicator&lt;/item&gt;<br />    &lt;/style&gt;   &nbsp;<br />    &lt;!-- "Implementation" of our ABS custom theme --&gt;<br />    &lt;style name="Widget.Styled.ActionBar" parent="Widget.Sherlock.Light.ActionBar.Solid.Inverse"&gt;<br />        &lt;item name="titleTextStyle"&gt;@style/TitleText&lt;/item&gt;<br />        &lt;item name="android:titleTextStyle"&gt;@style/TitleText&lt;/item&gt;<br />    &lt;/style&gt;<br />    <br />    &lt;!-- "Implementation" of VPI theme. We just set the text size and color. --&gt;<br />    &lt;style name="CustomTabPageIndicator" parent="Widget.TabPageIndicator"&gt;<br />        &lt;item name="android:textSize"&gt;50dip&lt;/item&gt;<br />        &lt;item name="android:textColor"&gt;#FFB33E3E&lt;/item&gt;<br />    &lt;/style&gt;<br />    <br />    &lt;!-- More customizations for ABS --&gt;<br />     &lt;style name="TitleText" &gt;<br />        &lt;item name="android:textColor"&gt;@android:color/darker_gray&lt;/item&gt;<br />        &lt;item name="android:textSize"&gt;17dip&lt;/item&gt;<br />    &lt;/style&gt;<br />&lt;/resources&gt;</pre><br />Then we create the&nbsp;fragment(s) we need to populate the viewpager. My fragment is a simple layout with just a <span style="font-family: Courier New, Courier, monospace;">TextView </span>indicating which tab is being shown.<br /><pre class="brush:java">public class TestFragment extends SherlockFragment {<br /> private String mContent = "???";<br /> <br />     public static TestFragment newInstance(String text) {<br />        TestFragment fragment = new TestFragment();<br />        <br />        // Supply num input as an argument.<br />        Bundle args = new Bundle();<br />        args.putString(KEY_TAB_NUM, text);<br />        fragment.setArguments(args);<br /><br />        return fragment;<br />    }<br /> <br />     @Override<br />     public View onCreateView(LayoutInflater inflater, ViewGroup container,<br />        Bundle savedInstanceState) {<br />        View view = inflater.inflate(R.layout.activity_main, null);<br />        String text = getString(R.string.tab_page_num) + mContent;<br />        ((TextView)view.findViewById(R.id.text)).setText(text);<br />        <br />        return view;<br /> }<br /><br />     @Override<br />     public void onCreate(Bundle savedInstanceState) {<br />        super.onCreate(savedInstanceState);<br />        mContent =  getArguments() != null ? getArguments().getString(KEY_TAB_NUM) : "???";<br />     }<br /><br />}</pre><br />Then we create the activity that will hold everything together.<br /><pre class="brush:java">public class VpiAbsTestActivity extends SherlockFragmentActivity {<br /> <br /> private static final String[] TAB_TITLES = new String[] { "This", "Is", "A", "ViewPager" };<br /> <br /> TestFragmentAdapter mAdapter;<br />    ViewPager mPager;<br />    PageIndicator mIndicator;<br />    <br /> @Override<br />    protected void onCreate(Bundle savedInstanceState) {<br />        super.onCreate(savedInstanceState);<br />        <br />        setContentView(R.layout.simple_tabs);<br />        <br />        mAdapter = new TestFragmentAdapter(getSupportFragmentManager());<br /><br />        mPager = (ViewPager)findViewById(R.id.pager);<br />        mPager.setAdapter(mAdapter);<br /><br />        mIndicator = (TabPageIndicator)findViewById(R.id.indicator);<br />        mIndicator.setViewPager(mPager);<br />    }<br /> <br /> class TestFragmentAdapter extends FragmentPagerAdapter {     <br />     private int mCount = TAB_TITLES.length;<br /><br />     public TestFragmentAdapter(FragmentManager fm) {<br />         super(fm);<br />     }<br /><br />     @Override<br />     public Fragment getItem(int position) {<br />         return TestFragment.newInstance(String.valueOf(position));<br />     }<br /><br />     @Override<br />     public int getCount() {<br />         return mCount;<br />     }<br />     <br />     @Override<br />     public CharSequence getPageTitle(int position) {<br />      return TAB_TITLES[position];<br />     }<br /> }<br />}</pre>And lastly, we apply the ViewPagerIndicator theme to our activity in the manifest:<br /><pre class="brush:xml">&lt;activity android:name="VpiAbsTestActivity" android:theme="@style/Theme.VPI"&gt;<br />&lt;/activity&gt;</pre><br />As it turns out, it <i>IS</i> pretty straightforward!