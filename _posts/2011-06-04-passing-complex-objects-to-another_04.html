---
layout: post
title: Passing complex objects to another Activity
date: '2011-06-04T02:21:00.007+10:00'
author: Zarah Dominguez
tags:
- extras
- intents
- complex values
- android
modified_time: '2012-02-20T14:13:34.828+11:00'
thumbnail: http://4.bp.blogspot.com/-khlSEQbj8TI/TekORjI-cPI/AAAAAAAAA5U/yV1IRvPIIJI/s72-c/complex_object_screen.png
blogger_id: tag:blogger.com,1999:blog-8588450866181483028.post-2840671726122369065
blogger_orig_url: http://www.zdominguez.com/2011/06/passing-complex-objects-to-another_04.html
---

Several months ago, I was faced with a problem of passing a complex object to another Activity. There are several ways of doing this:<br /><ul><li>"Deconstructing" the complex object to simple data types and passing them as extras through <tt>putExtra()</tt></li><li>Making the object <tt>Parcelable</tt></li><li>Making the object <tt>Serializable</tt></li></ul>I don't really understand the concepts behind an object being <tt>Parcelable</tt> or <tt>Serializable</tt>, so I was not comfortable using that approach. Deconstructing the object, on the other hand, is easier but it is quite hard to manage as the number of fields in the object increases.<br /><br />And then I came across another solution: using <tt>Bundle</tt>s. In this post, I will try to explain how to do that.<br /><br />In this sample project, we want to pass an instance of an <tt>AttendeeObject</tt> from our main activity to another. To better illustrate how we can use this method for different data types, an <tt>AttendeeObject</tt> will hold three pieces of information: a String name, an integer age, and a boolean indicating the person's presence.<br /><br />First, we construct the <tt>AttendeeObject</tt> like any old POJO. Create all the fields you want the object to contain and generate getters and setters for each. We then create the methods we would need to be able to pass, and subsequently receive, this object between activities.<br /><br />To pass an <tt>AttendeeObject</tt>, we would need to put it in a <tt>Bundle</tt> and pass it using <a href="http://developer.android.com/reference/android/content/Intent.html#putExtra(java.lang.String, android.os.Bundle)">Intent#putExtra(String key, Bundle bundle)</a>.<br /><pre class="brush:java">public Bundle bundleAttendee(AttendeeObject attendee){<br />     Bundle bundle = new Bundle();<br />     bundle.putString(NAME, attendee.getName());<br />     bundle.putInt(AGE, attendee.getAge());<br />     bundle.putBoolean(PRESENCE, attendee.isPresent());<br />  <br />     return bundle;<br />}</pre>Here, we simply put into a <tt>Bundle</tt> the values in the object that we want to pass.<br /><br />Next, we should be able to convert this bundle back to an <tt>AttendeeObject</tt> in the receiving <tt>Activity</tt>. This task is done by the following method:<br /><pre class="brush:java">public AttendeeObject unBundleAttendee(Bundle attendeeBundle){<br />     AttendeeObject attendee = new AttendeeObject();<br />     attendee.setName(attendeeBundle.getString(NAME));<br />     attendee.setAge(attendeeBundle.getInt(AGE));<br />     attendee.setIsPresent(attendeeBundle.getBoolean(PRESENCE));<br />  <br />     return attendee;<br />}</pre>Now, we are ready to use this in our application. I created a simple app that asks the user for the three values we would need to populate <tt>AttendeeObject</tt>.<br /><a href="http://4.bp.blogspot.com/-khlSEQbj8TI/TekORjI-cPI/AAAAAAAAA5U/yV1IRvPIIJI/s1600/complex_object_screen.png"><img alt="" border="0" id="BLOGGER_PHOTO_ID_5614034105147486450" src="http://4.bp.blogspot.com/-khlSEQbj8TI/TekORjI-cPI/AAAAAAAAA5U/yV1IRvPIIJI/s200/complex_object_screen.png" style="cursor: hand; cursor: pointer; display: block; height: 200px; margin: 0px auto 10px; text-align: center; width: 134px;" /></a>I won't discuss the details of creating the layout file, but it might be worthy to note that the possible values for the Spinner are just "Yes" and "No".<br /><br />When the user clicks on the "Create Attendee" button, the application creates a new <tt>AttendeeObject</tt> based on the values in the form and adds this to an <tt>ArrayList</tt> of <tt>AttendeeObject</tt>s.<br /><pre class="brush:java">private void onCreateAttendee() {<br />     // Create a new AttendeeObject<br />     AttendeeObject attendee = new AttendeeObject();<br />     attendee.setName(mNameText.getText().toString());<br />     attendee.setAge(Integer.valueOf(mAgeText.getText().toString()));<br />     attendee.setIsPresent(mCurrentPresence);<br />  <br />     // You can then do whatever you want with this object<br />     // like adding it to an ArrayList or saving it to a database<br />     mAttendees.add(attendee);<br />  <br />     Toast.makeText(ComplexObjectDemo.this, "Attendee added!", Toast.LENGTH_SHORT).show();<br />}</pre><br />When the user clicks on the "Submit Attendee" button, the app "packages" the chosen value into a <tt>Bundle</tt> and sets it as an <tt>extra</tt> to the <tt>Intent</tt>. For illustration purposes, the application always gets the second <tt>AttendeeObject</tt> in the <tt>ArrayList</tt>.<br /><pre class="brush:java">private void onSubmitObject() {<br />     Intent intent = new Intent(ComplexObjectDemo.this, ComplexObjectReceiverDemo.class);<br /><br />     // For simplicity, we will always get the second value<br />     Bundle value = createAttendeeBundle(1);<br /><br />     // In a "real" application, the Key should be defined in a constants file<br />     intent.putExtra("test.complex.attendee", value);<br />  <br />     startActivity(intent);<br />}<br /><br />private Bundle createAttendeeBundle(int index) {<br />     // Here, mAttendee is an instance of AttendeeObject<br />     // and mAttendees is an ArrayList holding all the created attendees<br />     return mAttendee.bundleAttendee(mAttendees.get(index));<br />}</pre><br /><br />Upon receiving the <tt>Intent</tt>, the new activity simply displays the values in the <tt>AttendeeObject</tt> passed into it. Here's how we can "unbundle" the <tt>Bundle</tt>:<br /><pre class="brush:java">@Override<br />public void onCreate(Bundle savedInstanceState) {<br />     super.onCreate(savedInstanceState);<br />     setContentView(R.layout.activity_complex_demo_receiver);<br /><br />     // Get the extras passed to this Activity        <br />     setUpViews(getIntent().getExtras());        <br />}<br /><br />private void setUpViews(Bundle extras) {<br />     // Again, the key should be in a constants file!<br />     Bundle extraAttendee = extras.getBundle("test.complex.attendee");<br /> <br />     AttendeeObject attendee = new AttendeeObject();<br /><br />     // Deconstruct the Bundle into the AttendeeObject<br />     attendee = attendee.unBundleAttendee(extraAttendee);<br /><br />     // The AttendeeObject fields are now populated, so we set the texts<br />     ((TextView) findViewById(R.id.attendee_age_value))<br />            .setText(String.valueOf(attendee.getAge()));<br />     ((TextView) findViewById(R.id.attendee_name_value))<br />            .setText(attendee.getName());<br />     ((TextView) findViewById(R.id.attendee_presence_value))<br />            .setText(String.valueOf(attendee.isPresent()));<br />}</pre>Here's how the receiving activity looks like:<a href="http://1.bp.blogspot.com/-KqcJ4DHaGsQ/TekU5ma_CpI/AAAAAAAAA5c/2fOBbdkiGeI/s1600/complex_object_result.png"><img alt="" border="0" id="BLOGGER_PHOTO_ID_5614041390292863634" src="http://1.bp.blogspot.com/-KqcJ4DHaGsQ/TekU5ma_CpI/AAAAAAAAA5c/2fOBbdkiGeI/s200/complex_object_result.png" style="cursor: hand; cursor: pointer; display: block; height: 200px; margin: 0px auto 10px; text-align: center; width: 134px;" /></a>Here's the complete <tt>AttendeeObject</tt> class.<br /><pre class="brush:java; collapse:true">package droidista.example;<br /><br />import android.os.Bundle;<br /><br />public class AttendeeObject {<br /><br /> public static final String NAME = "attendee.name";<br /> public static final String AGE = "attendee.age";<br /> public static final String PRESENCE = "attendee.presence";<br /> <br /> <br /> private String mName;<br /> private int mAge;<br /> private boolean mIsPresent;<br /> <br /> public AttendeeObject(){<br />  <br /> }<br /> <br /> public Bundle bundleAttendee(AttendeeObject attendee){<br />  Bundle bundle = new Bundle();<br />  bundle.putString(NAME, attendee.getName());<br />  bundle.putInt(AGE, attendee.getAge());<br />  bundle.putBoolean(PRESENCE, attendee.isPresent());<br />  <br />  return bundle;<br /> }<br /> <br /> public AttendeeObject unBundleAttendee(Bundle attendeeBundle){<br />  AttendeeObject attendee = new AttendeeObject();<br />  attendee.setName(attendeeBundle.getString(NAME));<br />  attendee.setAge(attendeeBundle.getInt(AGE));<br />  attendee.setIsPresent(attendeeBundle.getBoolean(PRESENCE));<br />  <br />  return attendee;<br /> }<br /> <br /> public String getName() {<br />  return mName;<br /> }<br /><br /> public void setName(String name) {<br />  this.mName = name;<br /> }<br /><br /> public int getAge() {<br />  return mAge;<br /> }<br /><br /> public void setAge(int age) {<br />  this.mAge = age;<br /> }<br /><br /> public boolean isPresent() {<br />  return mIsPresent;<br /> }<br /><br /> public void setIsPresent(boolean isPresent) {<br />  this.mIsPresent = isPresent;<br /> }<br />}</pre>And our main activity:<br /><pre class="brush:java; collapse:true">package droidista.example;<br /><br />import java.util.ArrayList;<br /><br />import android.app.Activity;<br />import android.content.Intent;<br />import android.os.Bundle;<br />import android.view.View;<br />import android.view.View.OnClickListener;<br />import android.widget.AdapterView;<br />import android.widget.ArrayAdapter;<br />import android.widget.Button;<br />import android.widget.EditText;<br />import android.widget.Spinner;<br />import android.widget.Toast;<br />import android.widget.AdapterView.OnItemSelectedListener;<br /><br />public class ComplexObjectDemo extends Activity implements OnClickListener {<br /> <br /> private Button mGoToNextIntent, mCreateAttendee, mClearFields;<br /> private EditText mNameText, mAgeText;<br /> private Spinner mPresence;<br /> <br /> AttendeeObject mAttendee = new AttendeeObject();<br /> <br /> private boolean mCurrentPresence;<br /> <br /> private ArrayList&lt;AttendeeObject&gt; mAttendees = new ArrayList&lt;AttendeeObject&gt;();<br /> <br /> @Override<br />    public void onCreate(Bundle savedInstanceState) {<br />        super.onCreate(savedInstanceState);<br />        setContentView(R.layout.activity_complex_demo);<br />        <br />        setUpViews();<br /> }<br /><br /> private void setUpViews() {<br />  setUpSpinner();  <br />     <br />  mNameText = (EditText)findViewById(R.id.name_text_input);<br />  mAgeText = (EditText)findViewById(R.id.age_text_input);  <br />  <br />  mGoToNextIntent = (Button)findViewById(R.id.btn_submit_object);<br />  mGoToNextIntent.setOnClickListener(this);<br />  <br />  mCreateAttendee = (Button)findViewById(R.id.btn_create_attendee);<br />  mCreateAttendee.setOnClickListener(this);<br />  <br />  mClearFields = (Button) findViewById(R.id.btn_clear_fields);<br />  mClearFields.setOnClickListener(this);<br /> } <br /> <br /> private void setUpSpinner() {<br />  mPresence = (Spinner) findViewById(R.id.presence_spinner);<br />     ArrayAdapter&lt;CharSequence&gt; adapter = ArrayAdapter.createFromResource(<br />             this, R.array.is_present_values, android.R.layout.simple_spinner_item);<br />     adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);<br />     mPresence.setAdapter(adapter);<br /> }<br /> <br /> <br /> private Bundle createAttendeeBundle(int index) {<br />  // Here, mAttendee is an instance of AttendeeObject<br />  // and mAttendees is an ArrayList holding all the created attendees<br />  return mAttendee.bundleAttendee(mAttendees.get(index));<br /> }<br /><br /> public void onClick(View v) {<br />  switch(v.getId()){<br />  case R.id.btn_create_attendee:<br />   onCreateAttendee();<br />   break;<br />  case R.id.btn_submit_object:<br />   onSubmitObject();  <br />   break;<br />  case R.id.btn_clear_fields:<br />   onClearFields();<br />   break;<br />  }<br /> }<br /><br /> private void onClearFields() {<br />  mAgeText.setText("");<br />  mNameText.setText("");<br />  mPresence.setSelection(0);<br /> }<br /><br /> private void onSubmitObject() { <br /><br />  // For simplicity, we will always get the second value<br />  Bundle value = createAttendeeBundle(1);<br /><br />  // In a "real" application, the Key should be defined in a constants file<br />  Intent intent = new Intent(ComplexObjectDemo.this, ComplexObjectReceiverDemo.class);<br />  intent.putExtra("test.complex.attendee", value);<br />   <br />  // Start the new activity<br />  startActivity(intent);<br /> }<br /><br /> private void onCreateAttendee() {<br />  // Create a new AttendeeObject<br />  AttendeeObject attendee = new AttendeeObject();<br />  attendee.setName(mNameText.getText().toString());<br />  attendee.setAge(Integer.valueOf(mAgeText.getText().toString()));<br />  attendee.setIsPresent(mCurrentPresence);<br />  <br />  // You can then do whatever you want with this object<br />  // like adding it to an ArrayList or saving it to a database<br />  mAttendees.add(attendee);<br />  <br />  // Notify the user<br />  Toast.makeText(ComplexObjectDemo.this, "Attendee added!", Toast.LENGTH_SHORT).show();<br /> }<br /><br /> public class MyOnItemSelectedListener implements OnItemSelectedListener {<br /><br />     public void onItemSelected(AdapterView parent, View view, int pos, long id) {<br />      mCurrentPresence = (pos==0) ? true : false;      <br />     }<br /><br />     public void onNothingSelected(AdapterView parent) { /*Do nothing.*/  }<br /> }<br />}</pre>And here's the second activity:<br /><pre class="brush:java; collapse:true">package droidista.example;<br /><br />import android.app.Activity;<br />import android.os.Bundle;<br />import android.widget.TextView;<br /><br />public class ComplexObjectReceiverDemo extends Activity {<br /> <br /> @Override<br /> public void onCreate(Bundle savedInstanceState) {<br />  super.onCreate(savedInstanceState);<br />  setContentView(R.layout.activity_complex_demo_receiver);<br /><br />  // Get the extras passed to this Activity <br />  setUpViews(getIntent().getExtras());        <br /> }<br /><br /> private void setUpViews(Bundle extras) {<br />  // Again, the key should be in a constants file!<br />  Bundle extraAttendee = extras.getBundle("test.complex.attendee");<br />  AttendeeObject attendee = new AttendeeObject();<br /><br />  // Deconstruct the Bundle into the AttendeeObject<br />  attendee = attendee.unBundleAttendee(extraAttendee);<br /><br />  // The AttendeeObject fields are now populated, so we set the texts<br />  ((TextView) findViewById(R.id.attendee_age_value)).setText(String.valueOf(attendee.getAge()));<br />  ((TextView) findViewById(R.id.attendee_name_value)).setText(attendee.getName());<br />  ((TextView) findViewById(R.id.attendee_presence_value)).setText(String.valueOf(attendee.isPresent()));<br /> }<br /><br />}</pre>