---
layout: post
title: SQLiteAssetHelper + ORMLite
date: '2015-01-21T00:20:00.001+11:00'
author: Zarah Dominguez
tags:
- database
- sqlite
- android
modified_time: '2015-01-21T00:23:46.595+11:00'
blogger_id: tag:blogger.com,1999:blog-8588450866181483028.post-6267826134161987884
blogger_orig_url: http://www.zdominguez.com/2015/01/sqliteassethelper-ormlite.html
---

I recently had cause to use Jeff Gilfelt's <a href="https://github.com/jgilfelt/android-sqlite-asset-helper" target="_blank">SQLite Asset Helper library</a>. For those unfamiliar, it is a library that can help with including a pre-populated SQLite database with your Android application. It is extremely convenient with unbundling a potentially huge database you would want to ship.<br /><br />For the app I was working on, I also wanted to use <a href="http://ormlite.com/sqlite_java_android_orm.shtml" target="_blank">ORMLite</a>. This is another library that helps with persisting POJOs to SQLite databases. If you deal with a lot of persisted objects in your code, then this is probably something worth looking into.<br /><br />I won't deal here with how ORMLite does its stuff, I'll leave it to you to go through the documentation. What I'll write about today is how to make these two libraries work together.<br /><br />Right. Moving on. If you look at ORMLite's <a href="https://github.com/j256/ormlite-examples/blob/master/android/HelloAndroid/src/com/example/helloandroid/DatabaseHelper.java" target="_blank">sample code</a>, it mentions that your database helper class must extend <code>OrmLiteSqliteOpenHelper</code>. If you look at SQLite Asset Helper's <a href="https://github.com/jgilfelt/android-sqlite-asset-helper/blob/master/samples/database-v1/src/main/java/com/example/MyDatabase.java" target="_blank">sample code</a>, it mentions that your database helper class must extend <code>SQLiteAssetHelper</code>. What this means for us is that somehow, we need our database helper class to be able to talk to both of these libraries.<br /><br />Since Android Studio is now the official IDE of choice, the <a href="https://github.com/zmdominguez/orm-sqliteassethelper" target="_blank">sample code for this post</a> is now AS-compatible. Yay!<br /><br />First, gradle:<br /><pre class="brush:xml">compile 'com.readystatesoftware.sqliteasset:sqliteassethelper:2.0.1'<br />compile 'com.j256.ormlite:ormlite-android:4.48'</pre><br />When dealing with anything database, I tend to create my POJOs first. For this sample, I will be using the infamous Northwind database. For simplicity, this app will simply get the first entry from the <code>Employees</code> table and dump the contents into a <code>TextView</code>.<br /><br />Since SQLite Asset Helper is the one who is in charge of our database creation and upgrade operations, we have to let it do the setup. Follow Jeff's example for that, BUT follow ORMLite's example for setting up ORMLite with <a href="https://github.com/j256/ormlite-examples/tree/master/android/HelloAndroidNoHelper" target="_blank">no helper</a>. At the end of it, you should have something similar <a href="https://github.com/zmdominguez/orm-sqliteassethelper/blob/master/app/src/main/java/droidista/blogspot/com/ormsqliteassethelper/orm/OrmDbHelper.java" target="_blank">to this</a>.<br /><br />To actually use ORMLite, just do as you usually would:<br /><pre class="brush:java">mOrmDbHelper = getHelper();<br /><br />try {<br /><br />&nbsp; &nbsp; Dao&lt;Employee, Integer&gt; employeeDao = mOrmDbHelper.getEmployeeDao();<br /><br />&nbsp; &nbsp; // Try to get the first entry in the table<br />&nbsp; &nbsp; Employee employee = employeeDao.queryBuilder().queryForFirst();<br />&nbsp; &nbsp; if(employee == null) {<br />&nbsp; &nbsp; &nbsp; &nbsp; textView.setText("No employees found!");<br />&nbsp; &nbsp; } else {<br />&nbsp; &nbsp; &nbsp; &nbsp; textView.setText(employee.toString());<br />&nbsp; &nbsp; }<br />} catch (SQLException e) {<br />&nbsp; &nbsp; e.printStackTrace();<br />}</pre><br />Here we just get the first entry we can from the table and dump. If all goes well when we run the app, we should see this in the logs:<br /><br /><pre class="brush:xml">01-20 23:02:39.203 &nbsp;12555-12555/droidista.blogspot.com.ormsqliteassethelper W/SQLiteAssetHelper﹕ copying database from assets...<br />01-20 23:02:39.226 &nbsp;12555-12555/droidista.blogspot.com.ormsqliteassethelper W/SQLiteAssetHelper﹕ database copy complete<br />01-20 23:02:39.289 &nbsp;12555-12555/droidista.blogspot.com.ormsqliteassethelper I/SQLiteAssetHelper﹕ successfully opened database northwind.db</pre><br />And we should see Nancy's details displayed on screen in all it's raw .toString() glory.