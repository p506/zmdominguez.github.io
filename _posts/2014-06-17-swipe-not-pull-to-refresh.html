---
layout: post
title: Swipe, not Pull, to Refresh
date: '2014-06-17T18:29:00.000+10:00'
author: Zarah Dominguez
tags:
- listview
- swipe to refresh
- android
modified_time: '2014-06-17T18:31:44.827+10:00'
thumbnail: http://2.bp.blogspot.com/-d7fqvs0jkfE/U5_4iC4wsGI/AAAAAAAABK0/Tli1cee-h_I/s72-c/device-2014-06-17-160825.png
blogger_id: tag:blogger.com,1999:blog-8588450866181483028.post-7773016512477593979
blogger_orig_url: http://www.zdominguez.com/2014/06/swipe-not-pull-to-refresh.html
---

I have recently came across this new <a href="https://developer.android.com/reference/android/support/v4/widget/SwipeRefreshLayout.html" target="_blank">View in the support library package</a> that allows your app to have built-in support for <strike>pull</strike> swipe to refresh. This is pretty cool, since we don't have to use any of the libraries out there. Admittedly, very little customization can be done, but then what else can we customize, right?<br /><br />Anyway, here's a short demo of using this nifty little view.<br /><div class="separator" style="clear: both; text-align: center;"></div><table><tbody><tr><td><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="http://2.bp.blogspot.com/-d7fqvs0jkfE/U5_4iC4wsGI/AAAAAAAABK0/Tli1cee-h_I/s1600/device-2014-06-17-160825.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" src="http://2.bp.blogspot.com/-d7fqvs0jkfE/U5_4iC4wsGI/AAAAAAAABK0/Tli1cee-h_I/s1600/device-2014-06-17-160825.png" height="320" width="180" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">Initial list</td></tr></tbody></table></td><td><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="http://1.bp.blogspot.com/-86wrbovsdCg/U5_4iN-UqrI/AAAAAAAABKs/5paup4tIsDY/s1600/device-2014-06-17-160903.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" src="http://1.bp.blogspot.com/-86wrbovsdCg/U5_4iN-UqrI/AAAAAAAABKs/5paup4tIsDY/s1600/device-2014-06-17-160903.png" height="320" width="180" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">While refreshing</td></tr></tbody></table></td><td><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="http://1.bp.blogspot.com/-_V06YWPycfY/U5_4iHsE-0I/AAAAAAAABKw/Q48SiFs2HJQ/s1600/device-2014-06-17-160918.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" src="http://1.bp.blogspot.com/-_V06YWPycfY/U5_4iHsE-0I/AAAAAAAABKw/Q48SiFs2HJQ/s1600/device-2014-06-17-160918.png" height="320" width="180" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">After refreshing</td></tr></tbody></table></td></tr></tbody></table><br />The app is a simple ListView that shows a list of countries. Swiping down on the list will simulate a long-running activity (like connecting to a server, for example) and afterwards updating the list with new data.<br /><br />Adding support for swipe to refresh is pretty straightforward. You would have to wrap the swipe-able layout in a <code>SwipeRefreshLayout</code>. Here is my XML file:<br /><br /><pre class="brush:xml">&lt;android.support.v4.widget.SwipeRefreshLayout xmlns:android="http://schemas.android.com/apk/res/android"<br />    xmlns:tools="http://schemas.android.com/tools"<br />    android:id="@+id/container"<br />    android:layout_width="match_parent"<br />    android:layout_height="match_parent"<br />    tools:ignore="MergeRootFrame" &gt;<br /><br />   &lt;ListView<br />          android:id="@android:id/list"<br />          android:layout_width="match_parent"<br />          android:layout_height="match_parent" /&gt;<br /><br />&lt;/android.support.v4.widget.SwipeRefreshLayout&gt;<br /></pre><br />In your <code>Fragment</code>, you would then have to put an <code>onRefreshListener</code> on this <code>SwipeRefreshLayout</code>. In my <code>Fragment</code>'s <code>onCreateView</code>, I have this:<br /><br /><pre class="brush:java">// Configure the swipe refresh layout<br />mSwipeRefreshLayout = (SwipeRefreshLayout) rootView.findViewById(R.id.container);<br />mSwipeRefreshLayout.setOnRefreshListener(this);<br />mSwipeRefreshLayout.setColorScheme(<br />   R.color.swipe_color_1, R.color.swipe_color_2,<br />   R.color.swipe_color_3, R.color.swipe_color_4);<br /></pre><br />The colors are defined in a <code>colors.xml</code> file in my <code>res/values</code> folder. To show or hide the refresh animation, you would have to call <code>setRefreshing(boolean)</code>. This means that if you have to kick off an <code>AsyncTask</code> when the user swipes down, call <code>setRefreshing(true)</code> in <code>onPreExecute</code>, and call <code>setRefreshing(false)</code> in <code>onPostExecute</code>.<br /><br />The implementation of <code>onRefresh</code> in the demo app is pretty simple, it simply grabs the next bunch of countries from a pre-defined list.<br /><br /><pre class="brush:java">@Override<br />public void onRefresh() {<br />    // Start showing the refresh animation<br />    mSwipeRefreshLayout.setRefreshing(true);<br />   <br />    // Simulate a long running activity<br />    new Handler().postDelayed(new Runnable() {<br />        @Override<br />        public void run() {<br />            updateCountries();<br />        }<br />    }, 5000);<br />}<br /></pre><br />That's it really. &nbsp;Nice and short. The code for this demo is <a href="https://github.com/zmdominguez/swipe-to-refresh-demo">in Github</a>.